<!DOCTYPE html>
<!--
    author: Patrick Cuba <cubap@slu.edu>
    -->
<html>

<head>
    <title>Data Encoding and Exhibition for RERUM</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/chota@latest">
    <style>
        .card header {
            font-style: italic;
        }
        
        section {
            overflow: hidden;
        }
        
        em code {
            font-style: normal;
        }

        textarea:disabled, input:disabled{
            opacity: 1;
            cursor: not-allowed;
        }

        textarea:disabled:hover, input:disabled:hover{
            opacity: 0.4;
            cursor: not-allowed;
        }

        footer.div{
            display: inline-flex;
        }
    </style>
</head>

<body>
    <div class="is-full-screen" id="badge" style="background-image: url('./images/deerlogo_banner.jpg'); background-position: center center; opacity: 1; background-repeat: no-repeat; background-color: rgb(35, 31, 32);">
    </div>

    <div class="container">

        <section class="row" id="tagline" style="position:relative;">
            <p class="col-2 hide-sm"></p>
            <p class="col-8">
                The Research Computing Group, in support of
                <a href="//rerum.io" target="_blank">RERUM</a> annotations, offers this simple project for quickly creating exhibitions of annotated collections.
            </p>
        </section>

        <section class="row">
            <h2>Installing DEER</h2>
            <p class="col-12">To install the script on your project, use the <code>deer.js</code> on your page.</p>
            <small class="col-12">
                <pre>&lt;script src="//deer.rerum.io/DEER/releases/alpha-0.11/deer.js" type="module">&lt;/script></pre>
            </small>
            <p class="col-12">
                <a href="https://github.com/CenterForDigitalHumanities/deer/wiki/Using-DEER-in-your-project" target="_blank">
                    View the wiki
                </a> or read on for details.
            </p>
        </section>

        <section class="row">
            <h2>Templates</h2>
            <p class="col-12">
                Use the <code>&lt;deer-view></code> element or <code>.deer-view</code> class to automatically connect the DEER renderer to your page.
            </p>
            <small class="col-12">
                <pre>&lt;deer-view deer-id="https://example.com/id/001">&lt;/deer-view></pre></small>
            <p class="col-12">
                The DEER module will automatically detect these elements and watch the <code>deer-id</code> attribute, rendering the resolved object inside. There are several templates available to you or you can
                <a href="https://github.com/CenterForDigitalHumanities/deer/wiki/Extending-DEER-with-Templates">create
                    your own</a>.
            </p>

            <h4>JSON template (default)</h4>
            <p class="col-12">DEER will construct an object combining the resolved <code>deer-id</code> value with the results of a query for annotations targeting it. The JSON template simply displays the result.</p>

            <div class="card col-6">
                <header>JSON Template</header>
                <deer-view deer-id="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706"></deer-view>
            </div>

            <pre class="col-6">&lt;deer-view 
    deer-template="json"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706">https://example.com/id/001</a>">
&lt;/deer-view></pre>

            <h4>Entity template</h4>
            <p class="col-12">The entity template attempts to render the object properties as a definition list, as is typically displayed as metadata or Dublin Core terms.
            </p>

            <div class="card col-6">
                <header>Entity Template</header>
                <div class="deer-view" deer-id="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706" deer-template="entity"></div>
            </div>

            <pre class="col-6">&lt;deer-view 
    deer-template="entity"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706">https://example.com/id/001</a>">
&lt;/deer-view></pre>

            <h4>Person template</h4>
            <p class="col-12">The person template attempts to render the object properties as a person's profile.</p>

            <div class="card col-6">
                <header>Person Template</header>
                <div class="deer-view" deer-id="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706" deer-template="person"></div>
            </div>

            <pre class="col-6">&lt;deer-view 
    deer-template="person"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706">https://example.com/id/001</a>">
&lt;/deer-view></pre>

            <h4>List template</h4>
            <p class="col-12">The list template shows items connected in an aggregation. The same template can be used for static and dynamic lists as explained <a href="https://github.com/CenterForDigitalHumanities/deer/wiki/Using-DEER-in-your-project#rendering-a-list-or-collection"
                    target="_blank">
                    in the wiki</a>.
            </p>

            <div class="card col-6">
                <header>List Template</header>
                <div class="deer-view" deer-id="https://devstore.rerum.io/v1/id/5c9d15afe4b0a44e13e6170c" deer-list="itemListElement" deer-template="list"></div>
            </div>

            <pre class="col-6">&lt;deer-view 
    deer-template="list"
    deer-list="itemListElement"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d15afe4b0a44e13e6170c">https://example.com/id/001</a>">
&lt;/deer-view></pre>

            <h4>Property template</h4>
            <p class="col-12">A simple template for showing a single property.</p>

            <div class="card col-6">
                <header>Property Template</header>
                <div class="deer-view" title="Sample Prop" deer-key="name" deer-id="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706" deer-template="prop"></div>
            </div>

            <pre class="col-6">&lt;deer-view 
    title="Sample Prop" 
    deer-key="name"
    deer-template="prop"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706">https://example.com/id/001</a>">
&lt;/deer-view></pre>
        </section>

        <section class="row">
            <h2>Customization</h2>
            <p class="col-12">Though the default options may be limited, it is simple for a developer to extend existing templates or create a new one from scratch. The complete instructions can be found
                <a href="https://github.com/CenterForDigitalHumanities/deer/wiki/Extending-DEER-with-Templates" target="_blank">in the wiki</a>.
            </p>

            <h4>Custom template</h4>
            <p class="col-12">A simple template made to show a cat.</p>

            <div class="card col-6">
                <header>Cat Template</header>
                <div class="deer-view" deer-id="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706" deer-template="cat"></div>
            </div>

            <pre class="col-6">&lt;deer-view 
    deer-template="cat"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d155fe4b0a44e13e61706">https://example.com/id/001</a>">
&lt;/deer-view></pre>

<pre class="col-12">
TEMPLATES.cat = (obj) => `&lt;h5>${obj.name}&lt;/h5>
    &lt;img src="http://placekitten.com/300/150" style="width:100%;">`
</pre>

            <h4>Configuration</h4>
            <p class="col-12">The <code>deer-config.js</code> file contains all the defaults for using DEER. Any developer wishing to rename watched attributes, to attach new templates, and more can extend this configuration object when initializing DEER.</p>

        </section>

        <section class="row">

            <h2>Interactions</h2>

            <p class="col-12">Developers can extend regular application logic to update and connect their interfaces by using the <a href="https://github.com/CenterForDigitalHumanities/deer/wiki/Events-in-DEER" target="_blank">DEER Event system</a> or rely on a few simple
                interactions for the bulk of users needs.
            </p>

            <h4>Using <code>deer-link</code></h4>
            <p class="col-12">In any <code>&lt;deer-view></code> element, the <code>deer-link</code> attribute instructs the templates how to attach links to the rendered object. For lists, each item with an <code>@id</code> property will include an anchor tag hyperlinking
                to the <code>deer-link</code> URL joined with the <code>@id</code>. This example simply changes the hash on the current page. Be aware of this default behavior if you are using a SPA framework that relies on hashes for routing and consider "Listening to Events" instead.
            </p>

            <div class="card col-6">
                <header>List Template with Links</header>
                <div class="deer-view" deer-link="#" deer-id="https://devstore.rerum.io/v1/id/5c9d15afe4b0a44e13e6170c" deer-list="itemListElement" deer-template="list"></div>
            </div>

            <pre class="col-6">&lt;deer-view 
    deer-template="list"
    deer-list="itemListElement"
    deer-link="#"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d15afe4b0a44e13e6170c">https://example.com/id/001</a>">
&lt;/deer-view></pre>

            <h4>Listening to the Hash</h4>
            <p class="col-12">Building on the example above, it is possible to load new objects into elements by watching the hash and updating the <code>deer-id</code> attribute. The DEER observer will rerender the contents immediately.
            </p>

            <small class="col-12">
                <pre>window.onhashchange = () => hashExample.setAttribute("deer-id", window.location.hash.substr(1))</pre>
            </small>


            <div class="card col-6">
                <header>List Template with Links</header>
                <div class="deer-view" deer-link="#" deer-id="https://devstore.rerum.io/v1/id/5c9d15afe4b0a44e13e6170c" deer-list="itemListElement" deer-template="list"></div>
                <footer class="text-primary"><img src="https://icongr.am/fontawesome/bolt.svg?size=18"> Click on a link in the list to update the rendered element on the right.</footer>
            </div>

            <div class="card col-6">
                <header>Load from Hash</header>
                <div class="col deer-view" id="hashExample" deer-template="entity">
                    no hash
                </div>
            </div>

            <h4>Listening to Events</h4>
            <p class="col-12">Another option that is more transparent to the user and allows for more flexibility is to use the <code>deer-listening</code> attribute to tell one <code>&lt;deer-view></code> element to watch another for clicks and load the render the resulting
                object.
            </p>

            <div class="card col-6">
                <header>List Template with Links</header>
                <div id="exampleListen" class="deer-view" deer-id="https://devstore.rerum.io/v1/id/5c9d15afe4b0a44e13e6170c" deer-list="itemListElement" deer-template="list"></div>
                <footer class="text-primary">
                    <img src="https://icongr.am/fontawesome/bolt.svg?size=18"> Click on a list item to update the "listening" <code>&lt;deer-view></code> elements below
                </footer>
            </div>

            <pre class="col-6">&lt;deer-view 
    id="exampleListen"
    deer-template="list"
    deer-list="itemListElement"
    deer-id="<a href="https://devstore.rerum.io/v1/id/5c9d15afe4b0a44e13e6170c">https://example.com/id/001</a>">
&lt;/deer-view>

&lt;deer-view 
    deer-template="person"
    deer-listening="exampleListen">
&lt;/deer-view></pre>

            <div class="card col-6">
                <header>Listening with a Person Template</header>
                <div class="deer-view" deer-listening="exampleListen" deer-template="person"></div>
            </div>

            <div class="card col-6">
                <header>Listening with an Entity Template</header>
                <div class="col deer-view" deer-listening="exampleListen" deer-template="entity"></div>
            </div>

        </section>

        <section class="row">
            <h2>Forms</h2>
            <p class="col-12">
                Adding new entities and annotations is a simple process (<a href="https://github.com/CenterForDigitalHumanities/deer/wiki/Using-DEER-in-your-project#create-an-entity" target="_blank">wiki</a>). Update your <code>&lt;form></code> with <code>deer-type</code>                and <code>deer-key</code> attributes.
            </p>

            <pre class="col-12">&lt;form deer-type="Thing" deer-context="http://schema.org" deer-id="<a href="https://devstore.rerum.io/v1/id/11111">https://example.com/id/001</a>">
    &lt;label>Label:&lt;/label>
    &lt;input type="text" deer-key="name">
    &lt;input type="hidden" deer-key="creator" value="demoAgent">
    &lt;input type="date" deer-key="date">
    &lt;select>
        &lt;option>Example choice&lt;/option>
        &lt;option>Unknown to DEER&lt;/option>
        &lt;option>Use as usual&lt;/option>
    &lt;/select>
    &lt;textarea deer-key="description">&lt;/textarea>
    &lt;input type="submit">
&lt;/form></pre>

            <div class="card col-6">
                <header>Thing Form -- You may change the date.</header>
                <form deer-type="Thing" deer-creator="Anonymous User at Form" deer-context="http://schema.org" deer-id="https://devstore.rerum.io/v1/id/60c7a956c3fb58284513eda3" id="formExample">
                    <div class="row">
                        <div class="col">
                            <label>Label:</label>
                            <input disabled type="text" deer-key="name">
                            <input type="hidden" deer-key="creator" value="demoAgent">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label>Date:</label>
                            <input type="date" deer-key="date" deer-creator="Anonymous User on Input">
                        </div>
                        <div class="col">
                            <label>Condition</label>
                            <select could-be-deer-key="condition">
                                <option>Good</option>
                                <option>Very Good</option>
                                <option>Mint</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label>Description:</label>
                            <textarea disabled deer-key="description" deer-creator="Anonymous User on Input"></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <input type="submit" class="col">
                    </div>
                </form>
                <p>
                    This form preloads with recent annotations on this entity. The card to the right updates with every change as well, even if someone else has made the changes.
                </p>
                <small><em>The <code>&lt;select></code> has no <code>deer-key</code> attribute, so no
                annotation is made. This can be used for local application logic before saving.</em></small>
            </div>

            <div class="card col-6">
                <header>Listening to the Form</header>
                <div class="col deer-view" deer-listening="formExample" deer-template="entity"></div>
            </div>
<p>
    There are many more complex ways forms acquire data through UI to accommodate more complex data objects 
    that you may want to record. How to process data from customized UIs is not well-documented yet, but we 
    have many examples in our public code that we can direct you to upon request.
</p>
            <h4>Simple Forms</h4>
            <p class="col-12">Sometimes all you need is a simple form. If you add the attribute 
                <code>deer-item-type="simple"</code> to your form, instead of designating each field
                into an annotation, DEER will save it to a simple object with properties. This should
                be reserved for objects that do not require a history of modification or attribution as
                when you do this within the DEER framework, several compromises must be made:
                <ol>
                    <li>
                        <strong>Automatic Overwrite</strong>. The <code>overwrite</code> flag is added to each
                        update, so the object URI persists. This also means that changes are not retained with
                        each update and the <code>__rerum</code> property only shows the most recent modification.
                    </li>
                    <li>
                        <strong>Restricted Updates</strong>. Only the <code>generator</code> of the original object
                        can implement an overwrite, using the same API key for the RERUM store. If a change is still
                        required, the application can fork the original object (save a new version) and overwrite
                        that one. DEER does not do this automatically.
                    </li>
                    <li>
                        <strong>Ambiguous Interoperability</strong>. Because another application may treat the 
                        original object as an entity and annotate it, the combined result may not be what is
                        expected. The <code>expand()</code> function of DEER builds an object by appending annotations
                        onto the base entity. This makes it difficult to explicitly remove properties or 
                        keep up with ongoing overwrites in the original object. The application can filter this, 
                        by checking the modification date on the original, but the history is unavailable.
                    </li>
                </ol>
            </p>

            <pre class="col-12">&lt;form deer-type="Thing" deer-item-type="simple" deer-context="http://schema.org">
    &lt;label>Label:&lt;/label>
    &lt;input type="text" deer-key="name">
    &lt;input type="hidden" deer-key="creator" value="demoAgent">
    &lt;input type="date" deer-key="date">
    &lt;select>
        &lt;option>Example choice&lt;/option>
        &lt;option>Unknown to DEER&lt;/option>
        &lt;option>Use as usual&lt;/option>
    &lt;/select>
    &lt;textarea deer-key="description">&lt;/textarea>
    &lt;input type="submit">
&lt;/form></pre>
                        
            <div class="card col-6">
                <header>Simple Thing Form -- You may change the date.</header>
                <form deer-type="Thing" deer-creator="Anonymous User" deer-item-type="simple" deer-context="http://schema.org" deer-id="https://devstore.rerum.io/v1/id/5cf19371e4b07d216aab775e" id="simpleFormExample">
                    <div class="row">
                        <div class="col">
                            <label>Label:</label>
                            <input disabled type="text" deer-key="name">
                            <input type="hidden" deer-key="creator" value="demoAgent">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label>Date:</label>
                            <input type="date" deer-key="date">
                        </div>
                        <div class="col">
                            <label>Condition</label>
                            <select could-be-deer-key="condition">
                                <option>Good</option>
                                <option>Very Good</option>
                                <option>Mint</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label>Description:</label>
                            <textarea disabled deer-key="description"></textarea>
                        </div>
                    </div>                    
                    <div class="row">
                        <input type="submit" class="col">
                    </div>
                </form>
                <p>
                    This form preloads with the most recent object. The card
                    to the right updates with every change as well.
                </p>
                <small><em>The <code>&lt;select></code> has no <code>deer-key</code> attribute, so no
                annotation is made. This can be used for local application logic before saving.</em></small>
            </div>

            <div class="card col-6">
                <header>Updating Simple Objects</header>
                <div class="col deer-view" deer-id="https://devstore.rerum.io/v1/id/5cf19371e4b07d216aab775e" deer-template="entity"></div>
                <small><em>The <code>first</code> property is on the base object, so it remains, even though the 
                form does not edit or update the value.</em></small>
            </div>
        </section>
        <footer class="nav nav-center text-primary is-full-width is-vertical-align">
            <div>
                <a target="_blank" href="https://www.slu.edu/research/faculty-resources/research-computing.php">
                    <img class="brand" src="./images/rcg-logo.jpg"> <small>Research Computing Group </small>
                </a>
            </div>
            <div>
                <a target="_blank" href="https://rerum.io">
                    <img class="brand" src="./images/rerum-logo.png"> <small>RERUM</small>
                </a>
            </div>
        </footer>
        <script src="./releases/alpha-0.11/deer.js" type="module"></script>
        <script>
            window.onhashchange = onload = () => hashExample.setAttribute("deer-id", window.location.hash.substr(1))

            document.onscroll = () => {
                let y = window.scrollY
                let h = window.innerHeight
                badge.style.opacity = 1 - y / h * 2
                tagline.style.top = y / h * -5 + "em"
            }
        </script>
</body>

</html>
